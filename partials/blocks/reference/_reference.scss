section.reference {
	padding: 96px 0 48px 0;

	--bg: var(--cl-white);
	--fg: var(--cl-black);
	--accent: var(--cl-secondary);
	--accent2: var(--cl-primary);

	background-color: var(--bg);
	color: var(--fg);

	.wrapper {
		@include max-width;
	}

	.tns-outer {
		--slider-bg: var(--bg);
		--slider-fg: var(--fg);
		--slider-accent: var(--fg);
		--slider-accent-text: var(--bg);

		.tns-controls {
			position: relative;
			transform: translateY(0);
			padding: 0;
			margin: 24px 0 0 0;
			justify-content: center;
			gap: 8px;
		}
	}

	.reference__container {
		// display: grid;
		// grid-template-columns: 1fr;
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		gap: 24px;
		position: relative;

		@include tablet {
			gap: 24px;
		}

		@include desktop{
			gap: 0 48px;
		}
		.reference__person {
		}

		// &::after {
		// 	content: '';
		// 	position: absolute;
		// 	top: 0;
		// 	// left: calc(50% - 32px);
		// 	left: 48px;
		// 	// left: 0;
		// 	width: 64px;
		// 	height: 64px;
		// 	background-color: var(--fg);
		// 	mask-image: url('../img/icons/quote-right-solid-primary.svg');
		// 	mask-size: 100% 100%;
		// 	mask-repeat: no-repeat;
		// }
	}


	.reference__text {
		position: relative;
		max-width: 800px;
		margin-inline: auto;
		// margin-top: auto;
		grid-area: text;
		font-style: italic;
		text-align: center;
		padding-top: 96px;
		// position: relative;
		flex: 1 100%;

		@include desktop{
			flex: 2;
		}

		&::after {
			content: '';
			position: absolute;
			top: 0;
			right: 24px;
			width: 64px;
			height: 64px;
			background-color: var(--fg);
			mask-image: url('../img/icons/quote-right-solid-primary.svg');
			mask-size: 100% 100%;
			mask-repeat: no-repeat;

			@include  desktop{
				right: 0;
			}
		}

		h3 {
			color: var(--fg);
			line-height: var(--lh-small);
		}

		@include custom(960px) {
			h3 {
				text-align: right;
			}
		}
	}	

	.reference__rating {
		width: 100%;
		flex: 1 100%;
		
		@include desktop{
			position: absolute;
			top: 0;
			left: 0;
			// padding: 0 0 0 48px;
		}

		ul {
			display: flex;
			justify-content: center;

			@include desktop{
				justify-content: flex-start;
			}

			li {
				display: block;
				position: relative;
				width: 40px;
				height: 40px;
				overflow: hidden;
				margin: 0 8px 0 0;
				transition: 0.25s all ease-in-out;
				line-height: 40px;
				white-space: nowrap;
				text-overflow: ellipsis;
				border: 2px solid var(--fg);
				@include square;
				opacity: 0.2;

				&:before {
					content: '';
					position: absolute;
					top: 50%;
					left: 50%;
					transform: translate(-50%, -50%);
					width: 40px;
					height: 40px;
					mask-image: url(../img/icons/star-regular-grey.svg);
					mask-size: 16px 16px;
					mask-repeat: no-repeat;
					mask-position: center;
					background-color: var(--fg);
				}
			}
		}

		&--1 {
			ul {
				li {
					&:nth-of-type(-n + 1) {
						opacity: 1;
					}
				}
			}
		}

		&--2 {
			ul {
				li {
					&:nth-of-type(-n + 2) {
						opacity: 1;
					}
				}
			}
		}

		&--3 {
			ul {
				li {
					&:nth-of-type(-n + 3) {
						opacity: 1;
					}
				}
			}
		}

		&--4 {
			ul {
				li {
					&:nth-of-type(-n + 4) {
						opacity: 1;
					}
				}
			}
		}

		&--5 {
			ul {
				li {
					&:nth-of-type(-n + 5) {
						opacity: 1;
					}
				}
			}
		}
	}

	.reference__person {
		flex: 1;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;

		@include desktop {
			flex-direction: row;
			justify-content: flex-start;
		}

		.reference__image {
			// margin: 0 0 48px 0;

			@include desktop {
				// width: calc(50% - 48px);
				// margin: 0 96px 0 0;
				// display: flex;
				// justify-content: flex-end;
			}

			img {
				width: 240px;
				aspect-ratio: 1 / 1;
				@include square;
			}
		}
	}

	.tns-outer .tns-controls{
		margin-top: 48px;

		@include desktop{
			// margin-top: 24px;
		}
	}

	// background

	&--grey {
		--bg: var(--cl-grey);
	}

	&--black {
		--bg: var(--cl-black);
		--fg: var(--cl-white);
	}

	&--primary {
		--bg: var(--cl-primary);
		--fg: var(--cl-primary-text);
		--accent: var(--cl-primary-text);
		--accent2: var(--cl-primary-text);
	}

	&--secondary {
		--bg: var(--cl-secondary);
		--fg: var(--cl-secondary-text);
		--accent: var(--cl-secondary-text);
		--accent2: var(--cl-secondary-text);
	}
}
